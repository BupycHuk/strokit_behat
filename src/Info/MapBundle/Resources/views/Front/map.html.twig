{% extends '::base_inner.html.twig' %}
{% block javascripts %}
<script type="text/javascript"
        src="https://maps.googleapis.com/maps/api/js?key={{ googleMapKey }}&sensor=true"></script>
<script type="text/javascript"
        src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/src/markerclusterer.js"></script>
<script type="text/javascript" src="{{ asset("bundles/infomap/js/googleMap.js") }}"></script>
<script type="text/javascript">
    google.maps.event.addDomListener(window, 'load', function ()
    {
        initialize();
        var markers = [];
        {% for item in items %}
        var marker =initializeFront("{{ item.location }}",
                "{{ item.address }}",
                '{% spaceless %}{% include "InfoMapBundle:Front:infoWindow.html.twig" with {'item':item} %} {% endspaceless %}',
                '{{ asset('bundles/infomap/img/' ~ item.entity ~ '_icon.png') }}');
        markers.push(marker);
        {% endfor %}

        var mcOptions = {gridSize: 20, maxZoom: 15};
        var mc = new MarkerClusterer(mapFront, markers, mcOptions);
    });
</script>
{% endblock %}

{% block stylesheets %}
<link href="{{ asset("bundles/infomap/css/front.css") }}" rel="stylesheet"/>
{% endblock %}

{% block body %}

    <h1 class="title">{{ 'map.title'|trans({}, translationDomain) }}</h1>
    <div class="main-map">
        <div class="big-map" id="map-canvas-front" style="height: 487px"></div>

        <i class="map-top"></i>
        <i class="map-right"></i>
        <i class="map-bottom"></i>
        <i class="map-left"></i>
        <a href="{{ link }}" class="map-list-link">смотреть списком</a>
        <div class="clear"></div>
    </div>
{% endblock %}